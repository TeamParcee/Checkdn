<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-title>{{recipient?.fname + " " + recipient?.lname }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content color="light" padding #content id="ion-content">

  <ion-list class="chat-list" lines="none">
    <div  class="chat-item" *ngFor="let message of messages; let i = index">
      <ion-item>

        <span [ngClass]=" ( message.type == 'send') ? 'sender' : 'receiver'">
          {{ message.text }} 
        </span>
      </ion-item>
      <p *ngIf=" ( messages[(i - 1)]?.timestamp + 100000 < messages[i]?.timestamp) ? true : false" class="timestamp"> {{ message.timestamp | date: 'MM/dd/yyyy, h:mm a'}}</p>
    </div>

  </ion-list>

</ion-content>


<ion-footer>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button>
        <ion-icon slot="icon-only" name="camera"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-textarea [(ngModel)]="text" style="border: 2px solid #f3f3f3; padding: 4px; border-radius: 5px;" rows="1"
      autoGrow="true">
    </ion-textarea>
    <ion-buttons slot="end">
      <ion-button (click)="sendMessage()">
        <ion-icon slot="icon-only" name="send"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>